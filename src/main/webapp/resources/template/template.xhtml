<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:fb="http://www.facebook.com/2008/fbml">
<h:head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta property="fb:app_id" content="577169682402524" />
	<title><ui:insert name="titulo">RecMusic</ui:insert></title>
	<meta name="description" content="" />
	<meta name="author" content="" />

	<link href="/RecoMusic/resources/css/bootstrap-min.css" type="text/css"
		rel="stylesheet" />
	<link href="/RecoMusic/resources/css/painel.css" type="text/css"
		rel="stylesheet" />
	<link href="/RecoMusic/resources/css/especifico.css" type="text/css"
		rel="stylesheet" />
	<link href="/RecoMusic/resources/css/jumbotron-narrow.css"
		type="text/css" rel="stylesheet" />
	<link href="/RecoMusic/resources/css/signin.css" type="text/css"
		rel="stylesheet" />
	<link href="/RecoMusic/resources/css/dashboard.css" type="text/css"
		rel="stylesheet" />
	<link href="/RecoMusic/resources/css/blog.css" type="text/css"
		rel="stylesheet" />
	<link rel="shortcut icon"
		href="/RecoMusic/resources/imagens/icones/logotipo.jpg" />
	<!-- <link href="/RecoMusic/resources/css/bootstrap-v00206960.css" rel="stylesheet" type="text/css"/> -->

	<ui:insert name="definicioesPre"></ui:insert>

	<div id="fb-root"></div>
	<script src="http://connect.facebook.net/en_US/all.js"></script>
	<script>

     FB.init({ 
        appId: '577169682402524',          //ID da aplicação web definido no Facebook
        channelUrl : 'http://localhost:8080/RecoMusic/index.xhtml', // Channel File
        cookie: true,                               // permitir cookies para poder acessar a sessão
        status: true,                               // verificar o status do login
        xfbml: true,                              // usar ou não tags do Facebook
        oauth: true                                // autenticação via OAuth 2.0
     });


    function loginWithFacebook()
    {
        FB.login(function(response) 
        {
           if (response.authResponse) 
           {
            	window.location = "http://localhost:8080/RecoMusic/index.xhtml?token="+response.authResponse.accessToken;
           }
           else
           {
        	   console.log('User cancelled login or did not fully authorize.');
           }
        }, {scope: 'email,user_likes'});
    } 
 


	 
    </script>
</h:head>

<h:body>

	<div id="header">
		<ui:insert name="header">
			<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
				<div class="container-fluid">
					<div class="navbar-header" style="font-family: fantasy">
						<button type="button" class="navbar-toggle" data-toggle="collapse"
							data-target=".navbar-collapse">
							<span class="sr-only">RecMusic</span> <span class="icon-bar"></span>

						</button>
						<a class="navbar-brand" href="#" style="color: #428bca">RecMusic</a>
					</div>
					<div class="navbar-collapse collapse">

						<h:panelGroup layout="block"
							rendered="#{UsuarioBean.logado eq false}">
							<h:form class="navbar-form navbar-right" role="form">
								<div class="form-group">
									<h:inputText value="#{UsuarioBean.emailLogin}"
										pt:placeHolder="Login/Email" class="form-control" />
								</div>
								<div class="form-group">
									<h:inputSecret pt:placeHolder="Password"
										value="#{UsuarioBean.usuario.senha}" class="form-control" />
								</div>
								<div class="form-group">
									<h:commandLink type="submit" class="btn btn-success"
										value="Entrar" actionListener="#{UsuarioBean.logar}"
										style="background-color:#428bca; border-color: #428bca;font-family: fantasy" />
								</div>
							</h:form>
						</h:panelGroup>


						<h:panelGroup layout="block"
							rendered="#{UsuarioBean.logado eq true}">
							<h:form class="navbar-form navbar-right" role="form">
								<div class="form-group">
									<h:outputLabel value="Bem-Vindo #{UsuarioBean.emailLogin}"
										style="margin-left:-300px;color: #428bca;font-family: fantasy" />
								</div>
								<div class="form-group">
									<h:inputText type="text" class="form-control"
										pt:placeholder="Pesquisar Música..." />
								</div>
								<div class="form-group">
									<h:commandLink type="submit" class="btn btn-success"
										value="Cadastro" data-toggle="modal"
										onclick="$('#myModal').modal('show')" data-target="#myModal"
										style="background-color:#222; border-color: #222; color:#428bca; font-family:fantasy">
										<f:ajax execute="@this"></f:ajax>
									</h:commandLink>
								</div>
								<div class="form-group">
									<h:commandLink type="submit" class="btn btn-success"
										value="Amigos"
										style="background-color:#222; border-color: #222; color:#428bca;font-family: fantasy" action="#{UsuarioBean.mudarPagina}" />
								</div>
								<div class="form-group">
									<h:commandLink type="submit" class="btn btn-success"
										value="Playlists"
										style="background-color:#222; border-color: #222; color:#428bca;font-family: fantasy" />
								</div>
								<div class="form-group">
									<h:commandLink type="submit" class="btn btn-success"
										value="Recomendação"
										style="background-color:#222; border-color: #222; color:#428bca;font-family: fantasy" />
								</div>
								<div class="form-group">
									<h:commandLink type="submit" class="btn btn-success"
										value="Deslogar"
										style="background-color:#428bca; border-color: #428bca;font-family: fantasy"
										actionListener="#{UsuarioBean.deslogar}" />
								</div>
							</h:form>
						</h:panelGroup>
					</div>
				</div>
			</div>

		</ui:insert>
	</div>


	<!-- /Corpo da página -->
	<div id="content ">
		<div class="painel">
			<ui:insert name="content">
			</ui:insert>
		</div>
	</div>

	<!-- 	<ui:define name="definicoesPre">

	</ui:define> -->

	<!-- 	<div id="folder">
		<ui:insert name="folder">
			<div class="container" style="margin-left: 362px">
				<p style="color: #5cb85c">&copy; RecMusic 2014</p>
			</div>
		</ui:insert>
	</div> -->

	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">Atualizar Cadastro</h4>
				</div>
				<div class="modal-body">
			
					<h:panelGroup layout="block" class="form-group" id="registroLogin">
					<h:outputLabel value="Login:"/>
						<h:inputText value="#{UsuarioBean.usuario.login}" id="validaLogin" data-prompt-position="topLeft"
							pt:placeHolder="Login" type="login" class="form-control" /> 
					</h:panelGroup>

					<h:panelGroup layout="block" class="row">

						<h:panelGroup layout="block" class="col-xs-6">
							<h:panelGroup class="form-group" id="registroNome">
							<h:outputLabel value="Nome:"/>
								<h:inputText value="#{UsuarioBean.usuario.nome}" id="validaNome"
									pt:placeHolder="Nome" class="form-control" />
							</h:panelGroup>
						</h:panelGroup>

						<h:panelGroup layout="block" class="col-xs-6">
							<h:panelGroup layout="block" class="form-group"
								id="registroSobrenome">
								<h:outputLabel value="Sobrenome:"/>
								<h:inputText value="#{UsuarioBean.usuario.sobrenome}"
									id="validaSobrenome" pt:placeHolder="Sobrenome"
									class="form-control" />

							</h:panelGroup>
						</h:panelGroup>

					</h:panelGroup>

					
					<h:panelGroup layout="block" id="registroSenha" class="form-group">
					<h:outputLabel value="Senha:"/>
						<h:inputSecret pt:placeHolder="Senha" id="validaSenha"
							value="#{UsuarioBean.usuario.senha}" class="form-control" />

					</h:panelGroup>
					
					<h:panelGroup layout="block" id="registroSenhaNovamente" class="form-group">
						<h:outputLabel value="Senha Novamente:"/>
						<h:inputSecret pt:placeHolder="Senha Novamente" id="validaSenhaNovamentes"
							value="#{UsuarioBean.usuario.senha}" class="form-control" />

					</h:panelGroup>


				</div>
				<h:form role="form-signin">
				<div class="modal-footer">
					<h:commandLink type="submit" class="btn btn-default" value="Cancelar" />
					 <h:commandLink type="submit" class="btn btn-primary" value="Salvar" style="background-color:#428bca; border-color: #428bca" />
				</div>
				</h:form>
			</div>
		</div>
	</div>


	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script src="/RecoMusic/resources/js/bootstrap-min.js"
		type="text/javascript" />
</h:body>
</html>